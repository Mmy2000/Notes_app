{% extends "base.html" %}
{% load static %}
{% load django_bootstrap5 %}
{% block body %}
<style>
  .button_styles {
    text-align: center;
    padding-top: 10px;
  }
</style>

<main id="main">

  <!-- ======= Breadcrumbs ======= -->
  <div class="breadcrumbs">
    <div class="container">

      <div class="d-flex justify-content-between align-items-center">
        <h2>My Notes</h2>
        <ol>
          <li><a href="index.html">Home</a></li>
          <li> My Notes</li>
        </ol>
      </div>

    </div>
  </div><!-- End Breadcrumbs -->

  <!-- ======= Blog Section ======= -->
  <section id="blog" class="blog">
    <div class="container" data-aos="fade-up">

      <div class="row g-5">

        <div class="col-lg-8">

          <div class="row gy-4 posts-list">
            {% for note in object_list %}
            <div class="col-lg-6">
              <article class="d-flex flex-column">
                {% if note.img %}
                <div class="post-img">
                  <img src="{{note.img.url}}" alt="" class="img-fluid">
                </div>
                {% else %}
                <h2>No Image Uploaded Yet</h2>
                {% endif %}
                <h2 class="title">
                  <a href="{{note.get_absolute_url}}">{{note}}</a>
                </h2>

                <div class="meta-top">
                  <ul>
                    <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a
                        href="{{note.get_absolute_url}}">{{note.user.username}}</a></li>
                    <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a
                        href="{{note.get_absolute_url}}"><time datetime="2022-01-01">{{note.craeted}}</time></a></li>
                  </ul>
                </div>

                <div class="content">
                  <p>
                    {{note.content|truncatewords:'20'}}
                  </p>
                </div>

                <div class="read-more mt-auto align-self-end">
                  <a href="{{note.get_absolute_url}}">Read More</a>
                </div>

              </article>
            </div><!-- End post list item -->
            {% endfor %}
            <div class="button_styles">
              <a href="{% url 'notes:add_note' %}">
                {% bootstrap_button button_type="submit" content="Add Note" %}</a>
            </div>

          </div><!-- End blog posts list -->

          <div class="blog-pagination">
            <ul class="justify-content-center">
              {% if page_obj.has_previous %}
              <li><a href="?page={{page_obj.previous_page_number}}">&lt;</a></li>
              {% else %}
              <li class="disabled"><span>&lt;</span></a></li>
              {% endif %}
              {% for i in paginator.page_range  %}
              {% if page_obj.number == i%}
              <li class="active">{{i}}</li>
              {% else %}
              <li class="active"><a href="?page={{i}}">{{i}}</a></li>
              {% endif %}

              {% endfor %}

              {% if page_obj.has_next %}
              <li><a href="?page={{page_obj.next_page_number}}"><span>&gt;</span></a></li>
              {% else %}
              <li class="disabled"><span>&gt;</span></a></li>
              {% endif %} </ul>
          </div><!-- End blog pagination -->

        </div>

        <div class="col-lg-4">

          <div class="sidebar">

            <div class="sidebar-item search-form">
              <h3 class="sidebar-title">Search</h3>
              <form action="{% url 'notes_app:post_list' %}" method="GET" class="mt-3">
                <input type="text" name="q" placeholder="Type a keyword and hit enter">
                <button type="submit"><i class="bi bi-search"></i></button>
              </form>
            </div><!-- End sidebar search formn-->

            <div class="sidebar-item categories">
              <h3 class="sidebar-title">Categories</h3>
              <ul class="mt-3">
                {% for category in categories %}
                <li><a href="{% url 'notes_app:post_by_category' category %}">{{category}}
                    <span>{{category.post_count}}</span></a></li>
                {% endfor %}
              </ul>
            </div><!-- End sidebar categories-->


          </div><!-- End sidebar recent posts-->

        </div><!-- End Blog Sidebar -->

      </div>

    </div>

    </div>
  </section><!-- End Blog Section -->

</main><!-- End #main -->
{% endblock body %}